<div class="edit-experiment__body">
    <mat-card class="flow-card" style="width:500px">
        <mat-card-header>
            <mat-card-title>Experiment {{experiment.name}} {{experiment.id}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field appearance="outline">
                <mat-label>Name</mat-label>
                <input matInput [(ngModel)]="experiment.name">
                <mat-hint>This is a required field.</mat-hint>
            </mat-form-field>
            <br />
            <mat-form-field appearance="outline">
                <mat-label>Description</mat-label>
                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="5" [(ngModel)]="experiment.description"></textarea>
                <mat-hint>This is a required field.</mat-hint>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Experiment code</mat-label>
                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="5" [(ngModel)]="experiment.experimentCode"></textarea>
                <mat-hint>This is a required field.</mat-hint>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Seed</mat-label>
                <input matInput [(ngModel)]="experiment.seed">
                <mat-hint>Default value will be used if not defined. Which is 1.</mat-hint>
            </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
            <div class="flex flex-end">
                <button mat-flat-button (click)="save()" color="primary" title="">Save</button>
            </div>
        </mat-card-actions>
    </mat-card>
    <br>
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <div *ngIf="snippets; then snippetsOn else snippetsOff"></div>
    <ng-template #snippetsOn>
        <mat-card class="flow-card">
            <mat-card-header>
                <mat-card-title>Snippets</mat-card-title>
            </mat-card-header>
            <mat-card-content></mat-card-content>
            <mat-card-actions>
                <div class="flex flex-end">
                    <!--         <button mat-flat-button (click)="cancel()">Cancel</button>
            <button mat-flat-button (click)="create()" color="primary" title="">Save</button> -->
                </div>
            </mat-card-actions>
        </mat-card>
    </ng-template>
    <ng-template #snippetsOff>
        <mat-card class="flow-card">
            <mat-card-header>
                <mat-card-title>Snippets</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                Empty
            </mat-card-content>
        </mat-card>
    </ng-template>
    <br>
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <mat-card class="flow-card">
        <mat-card-header>
            <mat-card-title>Metadata</mat-card-title>
        </mat-card-header>
        <div class="default-metadata-table">
            <div>
                <table>
                    <thead>
                        <tr>
                            <td class="default-metadata-table__key-cell">
                                Key
                            </td>
                            <td class="default-metadata-table__key-value">
                                Value
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Array of concrete values</td>
                            <td>[10,27,21]</td>
                        </tr>
                        <tr>
                            <td>Array defined in loop</td>
                            <td>range(10,30,10)</td>
                        </tr>
                        <tr>
                            <td>Array defined in loop </td>
                            <td>(10,30,10)</td>
                        </tr>
                        <tr>
                            <td>Concrete value</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>Array of strings, <br>some strings contain space</td>
                            <td>['#some custom accuracy', accuracy]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <button mat-flat-button color="primary" (click)="fill()">Fill with default metadatas</button>
            </div>
        </div>
        <!--  -->
        <!--  -->
        <div class="new-metadata-table">
            <div class="new-metadata-table__cell">
                <mat-form-field>
                    <mat-label>Key</mat-label>
                    <input matInput [(ngModel)]="newMetadata.key">
                </mat-form-field>
            </div>
            <div class="new-metadata-table__cell">
                <mat-form-field>
                    <mat-label>Value</mat-label>
                    <input matInput [(ngModel)]="newMetadata.value">
                </mat-form-field>
            </div>
            <div class="new-metadata-table__cell">
                <button mat-flat-button color="primary" (click)="add()">Add Metadata</button>
            </div>
        </div>
        <!--  -->
        <!--  -->
        <div *ngIf="experiment.metadatas.length; then metadatasOn else metadatasOff"></div>
        <ng-template #metadatasOn>
            <table mat-table multiTemplateDataRows [dataSource]="dataSource" class="metadata-table">
                <!--  -->
                <!--  -->
                <ng-container matColumnDef="key">
                    <th mat-header-cell *matHeaderCellDef>Key</th>
                    <td mat-cell *matCellDef="let el" class="metadata-table__cell-key">{{el.key}}</td>
                </ng-container>
                <!--  -->
                <!--  -->
                <ng-container matColumnDef="value">
                    <th mat-header-cell *matHeaderCellDef>Value</th>
                    <td mat-cell *matCellDef="let el" class="metadata-table__cell-value metadata-edit">
                        <div>{{el.value}}</div>
                        <div class="metadata-edit-block" [@editMetadataValue]="el == currentEditMetadata ? 'expanded' : 'collapsed'">
                            <div style="width:100%">
                                <textarea rows="2" [(ngModel)]="el.newValue" value="{{el.value}}"> </textarea>
                            </div>
                            <div>
                                <button mat-flat-button color="primary" (click)="change(el,$event)">Change</button>
                            </div>
                        </div>
                    </td>
                </ng-container>
                <!--  -->
                <!--  -->
                <ng-container matColumnDef="bts">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let el" class="metadata-table__cell-bt">
                        <button mat-flat-button color="warn" (click)="delete(el,$event)">Delete</button>
                    </td>
                </ng-container>
                <!--  -->
                <!--  -->
                <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                <tr mat-row *matRowDef="let el; columns: columnsToDisplay;" [class.metadata-edited]="currentEditMetadata === el" (click)="edit(el)">
                </tr>
            </table>
        </ng-template>
        <ng-template #metadatasOff>
            <br>
            Metadatas Empty
            <br>
        </ng-template>
    </mat-card>
</div>