<ct-section *ngIf="!experimentInfo">
    <ct-section-body>
        <ct-section-body-row>
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </ct-section-body-row>
    </ct-section-body>
</ct-section>

<div *ngIf="experimentInfo">

    <div>
        <br>
        <div style="font-size:36px;letter-spacing: 0.05em;line-height: 1;">
            {{experimentInfoExtended.experiment.name}}
            <span>&nbsp;&nbsp;&nbsp;</span>
            {{experimentInfoExtended.experiment.execState}}
        </div>
        <br>
    </div>

    <ct-section>
        <ct-section-header>
            <ct-section-header-row>
                <ct-heading>The experiment info</ct-heading>
            </ct-section-header-row>
        </ct-section-header>
        <ct-section-body>
            <ct-section-body-row>
                <ct-table>
                    <table mat-table="mat-table" [dataSource]="tables.generalInfo.table">
                        <ng-container matColumnDef="key">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Key</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{ el[0] }}</td>

                        </ng-container>
                        <ng-container matColumnDef="value">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Value</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">
                                <span *ngIf="el[0] !== 'createdOn'">{{ el[1] }}</span>
                                <span *ngIf="el[0] === 'createdOn'">
                                    {{ el[1] | date:'HH:mm:ss, MMM&nbsp;d,&nbsp;yyyy'}}
                                </span>
                            </td>
                        </ng-container>
                        <tr mat-header-row="mat-header-row" *matHeaderRowDef="tables.generalInfo.columnsToDisplay">
                        </tr>
                        <tr mat-row="mat-row" *matRowDef="let row; columns: tables.generalInfo.columnsToDisplay;"> </tr>
                    </table>
                </ct-table>
            </ct-section-body-row>
        </ct-section-body>
    </ct-section>



    <ct-section>
        <ct-section-header>
            <ct-section-header-row>
                <ct-heading>Hyper parameters</ct-heading>
            </ct-section-header-row>
        </ct-section-header>
        <ct-section-body>
            <ct-section-body-row>
                <ct-table>
                    <table mat-table="mat-table" [dataSource]="tables.hyperParameters.table">
                        <ng-container matColumnDef="key">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Key</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.key}}</td>
                        </ng-container>
                        <ng-container matColumnDef="value">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Value</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.values}}</td>
                        </ng-container>
                        <ng-container matColumnDef="variants">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Variants</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.variants}}</td>
                        </ng-container>
                        <tr mat-header-row="mat-header-row" *matHeaderRowDef="tables.hyperParameters.columnsToDisplay">
                        </tr>
                        <tr mat-row="mat-row" *matRowDef="let row; columns: tables.hyperParameters.columnsToDisplay;">
                        </tr>
                    </table>
                </ct-table>
            </ct-section-body-row>
        </ct-section-body>
    </ct-section>



    <ct-section>
        <ct-section-header>
            <ct-section-header-row>
                <ct-heading>Features</ct-heading>
            </ct-section-header-row>
        </ct-section-header>
        <ct-section-body>
            <ct-section-body-row>
                <ct-table>
                    <table mat-table="mat-table" [dataSource]="tables.features.table">
                        <ng-container matColumnDef="id">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Id </th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.id}} </td>
                        </ng-container>
                        <ng-container matColumnDef="resourceCodes">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Set of Features </th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.variables}} </td>
                        </ng-container>
                        <ng-container matColumnDef="execStatus">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Exec Status </th>
                            <td mat-cell="mat-cell" *matCellDef="let el">{{el.execStatusAsString}}</td>
                        </ng-container>
                        <ng-container matColumnDef="maxValue">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef>Max values</th>
                            <td mat-cell="mat-cell" *matCellDef="let el">
                                <div *ngFor="let v of el.maxValues | keyvalue">
                                    {{v.key}} - {{v.value}}
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="bts">
                            <th mat-header-cell="mat-header-cell" *matHeaderCellDef> </th>
                            <td mat-cell="mat-cell" *matCellDef="let el">
                                <ct-flex justify-content="flex-end" gap="9px">
                                    <ct-flex-item>
                                        <a mat-flat-button="mat-flat-button"
                                            [routerLink]="['../../../','experiment',experimentResult.id,'feature-progress', experiment.id, el.id]"
                                            color="primary" title="">Info </a>
                                    </ct-flex-item>
                                </ct-flex>
                            </td>
                        </ng-container>
                        <tr mat-header-row="mat-header-row" *matHeaderRowDef="tables.features.columnsToDisplay"> </tr>
                        <tr mat-row="mat-row" *matRowDef="let row; columns: tables.features.columnsToDisplay;"> </tr>
                    </table>
                </ct-table>
            </ct-section-body-row>
        </ct-section-body>
    </ct-section>
</div>